@page "/cryptolist"
@inject HttpClient Http

<h3>Top 100 Cryptos</h3>

@if (cryptos == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <label for="orderSelect">Order By: </label>
    <select @bind="selectedOrder" @bind:after="LoadData">
    <option value="marketcap">Market Cap</option>
    <option value="price">Price</option>
    <option value="rank">Rank</option>
</select>

    <p><strong>Last Updated:</strong> @lastUpdated.ToString("yyyy-MM-dd HH:mm:ss")</p>
    <button class="btn btn-success mb-3" @onclick="RefreshData">🔄 Refresh Prices</button>
    <table class="table">
        <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Symbol</th>
                <th>Price (USD)</th>
                <th>Market Cap</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var coin in cryptos)
            {
                <tr>
                    <td>@coin.MarketCapRank</td>
                    <td>@coin.Name</td>
                    <td>@coin.Symbol.ToUpper()</td>
                    <td>$@coin.CurrentPrice.ToString("N2")</td>
                    <td>$@coin.MarketCap.ToString("N0")</td>
                </tr>
            }
        </tbody>
    </table>
}

@* @code {
    
} *@